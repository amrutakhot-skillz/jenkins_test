//pipeline{
 //agent any
  //stages{
   //stage('Build'){
     /*steps{
       sh 'echo "Hello from Upstream_test main"'
     }
   }
 }
}*/

pipeline {
  agent any

  stages {
    stage ('Yarn install') {
      steps {
        script {
          sh ' echo "Yarn install"'
          }
        }
    }
    stage ('Build iOS and Android OTA Bundles') {
      steps {
        script {
         sh ' echo "Build iOS and Android OTA Bundles"'
          }
        }
    }
    stage ('Build Native SDKs') {
      parallel {
        stage ('Build iOS') {
          steps {
            script {
              sh ' echo "Compile iOS SDK"'
            }
          }
        }
        stage ('Build Android') {
          steps {
            script {
                sh ' echo "Compile Android SDK" '
              }
            }
          }
        }
    }
    stage ('Build Cross-Platform SDKs') {

      parallel {
        stage ('Build Unity SDK') {
          steps {
            script {
              sh 'echo "Build Unity SDK"'
            }
          }
        }
      }
    }
    stage ('Build Unity Test Apps') {
      parallel {
        stage('Build Unity iOS') {
          
          steps {
            script {
              sh '
                echo "Build Unity iOS"
              '
            }
          }
        }
        stage ('Build Unity Android') {
          
          steps {
            script {
              sh '
                echo "Build Unity Android" '
            }
          }
        }
      }
    }
    stage ('Build Cordova Test Apps') {
      parallel {
        stage ('Build Cordova iOS') {
          steps {
            script {
              sh '''
                echo "Compile Cordova iOS Test App paused for now"
              '''
            }
          }
        }
        stage ('Build Cordova Android') {
          steps {
            script {
              sh '''
                echo "Compile Android Test App paused for now"
              '''
            }
          }
        }
      }
    }
    stage ('Archive Artifacts') {
      steps {
        script {
          sh '''
                echo "Archive Artifacts"
              '''
        }
      }
    }
    stage ('Test') {
      parallel {
        stage ('Run iOS Tests') {
          steps {
            script {
              sh '''
                echo "iOS tests run"
                '''
          }
        }
        stage ('Run Android Tests') {
          steps {
            script {
              sh ' echo "run android tests"'
            }
          }
        }
        stage ('Run OTA Tests') {
          steps {
            script {
              sh 'echo "run android tests"'
            }
          }
        }
      }
    }
  }
    stage ('Downstream Apps') {
      steps {
        script {
         sh ' echo "Triggering downstream build for DiamondStrike-Unity" '
        }
      }
    }
    stage ('Cleanup') {
      steps {
        script {
            sh '''
              echo "Cleaning iOS Build Folder and test results"
            '''
          }
        }
      }
  } 
}
